# Маршрут технологических карт ТСЗП

Локальное веб-приложение для управления технологическими картами, маршрутами операций и маршрутными квитанциями. Все данные хранятся на сервере в файле-базе `data/database.json`, поэтому ими могут пользоваться несколько пользователей из разных браузеров и устройств, подключённых к одному экземпляру приложения.

## Структура
- `index.html` — основной каркас страницы и разметка.
- `style.css` — стили оформления.
- `app.js` — функциональность приложения, работа с серверным API и генерацией EAN-13.
- `server.js` — лёгкий сервер на встроенных модулях Node.js, отдающий статику и JSON API.
- `db.js` — простой файловый "движок" базы данных (очередь на запись, нормализация данных).
- `data/database.json` — файл-база, где сервер хранит текущее состояние карт, операций и участков.

## Установка и запуск локально
1. Убедитесь, что установлен Node.js 18+.
2. Дополнительные зависимости не требуются — используются только встроенные модули Node.js.
3. Запустите сервер:
   ```bash
   npm start
   ```
4. Откройте в браузере `http://localhost:8000/`.

Данные создаются автоматически при первом запуске и сохраняются в `data/database.json`. Чтобы перенести состояние на другой сервер, скопируйте этот файл.

## Доступ из сети
- Для доступа с других устройств запустите сервер, привязав его к `0.0.0.0`:
  ```bash
  HOST=0.0.0.0 PORT=8000 npm start
  ```
- Определите IP машины и откройте `http://IP_АДРЕСА:8000/` на нужном устройстве.

## Развертывание
Приложение работает как статический сайт с небольшим API для хранения данных. Его можно развернуть:
- На любом сервере/контейнере с Node.js, запустив `npm start`.
- В Docker-контейнере (базовый образ `node:18-alpine`, копируйте файлы, установите зависимости, опубликуйте порт `8000`).

## Решение конфликтов при слиянии
Если GitHub сообщает о конфликтах этой ветки, обновите её относительно `main` (merge/rebase), вручную разрешите маркеры `<<<<<<<`, `=======`, `>>>>>>>` в конфликтующих файлах и сделайте коммит с результатом. После этого PR можно слить.
