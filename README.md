# Маршрут технологических карт

Локальное веб-приложение для управления технологическими картами, маршрутами операций и маршрутными квитанциями. Теперь данные сохраняются на сервере (файл `data/data.json`), поэтому их можно разделять между браузерами, подключёнными к одному экземпляру приложения.

## Структура
- `index.html` — основной каркас страницы и разметка.
- `style.css` — стили оформления.
- `app.js` — функциональность приложения, работа с серверным API и генерацией EAN-13.
- `server.js` — небольшой сервер на Express для выдачи статических файлов и хранения данных на диске.
- `data/data.json` — файл, в котором сервер хранит текущее состояние карт, операций и участков.

## Почему ветка конфликтует в PR
Сообщение GitHub о конфликте означает, что в базовой ветке (обычно `main`) появились изменения в тех же файлах, что и в этой ветке (`README.md`, `app.js`, `index.html`). GitHub не может совместить их автоматически. Чтобы решить проблему:

1. Обновите локальную копию базовой ветки и выполните merge/rebase в текущую ветку:
   ```bash
   git checkout work
   git fetch origin
   git merge origin/main    # или `git rebase origin/main`
   ```
2. Откройте конфликтующие файлы (`README.md`, `app.js`, `index.html`), вручную выберите правильные блоки и удалите маркеры `<<<<<<<`, `=======`, `>>>>>>>`.
3. Проверьте приложение (например, `npm install && npm run dev` или `npm start`), убедитесь, что собирается и запускается.
4. Сделайте коммит с решением конфликтов и обновите PR.

После этого уведомление о конфликтах исчезнет, и ветку можно будет слить.

## Установка и запуск локально
1. Убедитесь, что установлен Node.js 18+.
2. В корне репозитория установите зависимости:
   ```bash
   npm install
   ```
3. Запустите сервер:
   ```bash
   npm start
   ```
4. Откройте в браузере `http://localhost:8000/`.

Данные автоматически создаются при первом запуске и сохраняются в `data/data.json`. Их можно переносить между машинами, копируя этот файл.

## Доступ из сети
- Чтобы открыть приложение с другого устройства в сети, запустите сервер, привязав его к `0.0.0.0`:
  ```bash
  PORT=8000 HOST=0.0.0.0 npm start
  ```
- Определите IP машины и откройте `http://IP_АДРЕСА:8000/` на нужном устройстве.

## Развертывание
Приложение работает как статический сайт с небольшим API для хранения данных. Его можно развернуть:
- На любом сервере/контейнере с Node.js, запустив `npm install` и `npm start`.
- В Docker-контейнере (добавьте `node:18-alpine`, копируйте файлы, установите зависимости и опубликуйте порт `8000`).
